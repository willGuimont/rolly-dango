import wasm4
import macros

type Sprite* = ref object
    width*: uint32
    height*: uint32
    flags*: uint32
    data*: array[64, uint8]

macro makeSprite*(data: untyped): untyped =
    let width = ident($`data` & "Width")
    let height = ident($`data` & "Height")
    let flags = ident($`data` & "Flags")
    let sprite = ident($`data` & "Sprite")

    return quote do:
        Sprite(`width`, `height`, `flags`, `data`)

#var tile: Sprite = Sprite(width: 16, height: 16, flags: BLIT_2BPP,
#    data: tileData)

# dango16px
const dango16pxWidth = 16
const dango16pxHeight = 16
const dango16pxFlags = BLIT_2BPP
var dango16px: array[64, uint8] = [0x00'u8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x05, 0x50,
        0x00, 0x00, 0x1a, 0xa4, 0x00, 0x00, 0x6a, 0xa9, 0x00, 0x00, 0x69, 0x99,
        0x00, 0x00, 0x69, 0x99, 0x00, 0x00, 0x6a, 0xa9, 0x00, 0x00, 0x15, 0x54,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00]

# tile16px
const tile16pxWidth = 16
const tile16pxHeight = 16
const tile16pxFlags = BLIT_2BPP
var tile16px: array[64, uint8] = [0x00'u8, 0x01, 0x00, 0x00, 0x00, 0x1a, 0x90,
        0x00, 0x01, 0xaa, 0xa9, 0x00, 0x1a, 0xaa, 0xaa, 0x90, 0xaa, 0xaa, 0xaa,
        0xa8, 0x66, 0xaa, 0xaa, 0x64, 0xaa, 0x6a, 0xa6, 0xa8, 0x6a, 0xa6, 0x6a,
        0xa4, 0xaa, 0xaa, 0xaa, 0xa8, 0x6a, 0xa9, 0xaa, 0xa4, 0xaa, 0xaa, 0xaa,
        0xa8, 0x1a, 0xa9, 0xaa, 0x90, 0x01, 0xaa, 0xa9, 0x00, 0x00, 0x19, 0x90,
        0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00]






